<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OSF 2026 – Approved Teams</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #004b8d;
      --accent:  #d62828;
      --bg:      #f3f4f6;
      --card-bg: #ffffff;
      --text:    #111827;
      --muted:   #6b7280;
      --border:  #e5e7eb;
      --radius-lg: 16px;
      --radius-md: 999px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, #dbeafe 0, #f9fafb 40%, #e5e7eb 100%);
      color: var(--text);
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px 16px 40px;
    }

    .header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 16px;
      align-items: center;
      margin-bottom: 18px;
    }

    .title-block { max-width: 640px; }

    .badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.07);
      color: #1d4ed8;
      font-size: 12px;
      font-weight: 600;
      gap: 6px;
      margin-bottom: 8px;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.28);
    }

    h1 {
      margin: 0;
      font-size: 24px;
      letter-spacing: 0.03em;
    }

    .subtitle {
      margin-top: 6px;
      color: var(--muted);
      font-size: 14px;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      box-shadow: 0 18px 40px rgba(15,23,42,0.16);
      border: 1px solid rgba(148,163,184,0.4);
      padding: 18px 18px 14px;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 12px;
    }

    .pill-filter {
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      padding: 5px 11px;
      font-size: 12px;
      background: #f9fafb;
      color: #374151;
      cursor: pointer;
    }

    .pill-filter.active {
      background: var(--primary);
      border-color: var(--primary);
      color: #ffffff;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-top: 4px;
    }

    thead {
      background: #f3f4f6;
    }

    th, td {
      padding: 8px 10px;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
      vertical-align: middle;
    }

    th {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #6b7280;
    }

    tbody tr:hover {
      background: #f9fafb;
    }

    .tag-division {
      display:inline-block;
      border-radius: 999px;
      padding: 2px 8px;
      font-size: 11px;
      background: rgba(37,99,235,0.08);
      color:#1d4ed8;
      font-weight: 600;
    }

    #approvedEmptyNote {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }

    @media (max-width: 640px) {
      .card { padding: 14px 10px 10px; }
      th:nth-child(5), td:nth-child(5) { display:none; }
    }
  </style>
</head>
<body>
<div class="page">
  <header class="header">
    <div class="title-block">
      <div class="badge">
        <span class="badge-dot"></span>
        AYSO 46th Annual Oxnard Sports Festival
        <span>• Approved Teams</span>
      </div>
      <h1>Approved Tournament Teams</h1>
      <p class="subtitle">
        Teams listed here have been fully accepted by the Tournament Committee and cleared for the 2026 Oxnard Sports Festival.
      </p>
    </div>
  </header>

  <section class="card">
    <div class="filters" id="divisionFilters">
      <button class="pill-filter active" data-div="ALL">All Divisions</button>
      <button class="pill-filter" data-div="10UB">10U Boys</button>
      <button class="pill-filter" data-div="10UG">10U Girls</button>
      <button class="pill-filter" data-div="12UB">12U Boys</button>
      <button class="pill-filter" data-div="12UG">12U Girls</button>
      <button class="pill-filter" data-div="14UB">14U Boys</button>
      <button class="pill-filter" data-div="14UG">14U Girls</button>
    </div>

    <table>
      <thead>
      <tr>
        <th>Division</th>
        <th>Region</th>
        <th>Team</th>
        <th>Coach</th>
        <th>City / State</th>
      </tr>
      </thead>
      <tbody id="approvedTeamsBody"></tbody>
    </table>

    <div id="approvedEmptyNote">Loading approved teams…</div>
  </section>
</div>

<script>
  const API_URL = 'https://script.google.com/macros/s/AKfycby81ycJHK0S9NUWgWuYSuHHzmz9mf2VKV_oDt4KEJv-hvSvlvOF-dxZa-AnZacewuJ8/exec';

  let teams = [];
  let approvedFilterDivision = 'ALL';

  function divisionLabel(code) {
    return {
      '10UB': '10U Boys', '10UG': '10U Girls',
      '12UB': '12U Boys', '12UG': '12U Girls',
      '14UB': '14U Boys', '14UG': '14U Girls'
    }[code] || code || '';
  }

  const approvedBody = document.getElementById('approvedTeamsBody');
  const approvedEmptyNote = document.getElementById('approvedEmptyNote');
  const divisionFiltersContainer = document.getElementById('divisionFilters');

  divisionFiltersContainer.addEventListener('click', (e) => {
    const btn = e.target.closest('.pill-filter');
    if (!btn) return;
    approvedFilterDivision = btn.dataset.div;
    divisionFiltersContainer.querySelectorAll('.pill-filter').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderApprovedTeams();
  });

  function renderApprovedTeams() {
    approvedBody.innerHTML = '';

    const approvedTeams = teams
      .filter(t => t.status === 'approved')
      .filter(t => approvedFilterDivision === 'ALL' || t.division === approvedFilterDivision)
      .sort((a, b) => {
        if (a.division === b.division) {
          return (a.teamName || '').localeCompare(b.teamName || '');
        }
        return (a.division || '').localeCompare(b.division || '');
      });

    if (approvedTeams.length === 0) {
      approvedEmptyNote.style.display = 'block';
      approvedEmptyNote.textContent = 'No approved teams to display yet.';
      return;
    } else {
      approvedEmptyNote.style.display = 'none';
    }

    approvedTeams.forEach(team => {
      const tr = document.createElement('tr');

      const tdDiv = document.createElement('td');
      const divTag = document.createElement('span');
      divTag.className = 'tag-division';
      divTag.textContent = divisionLabel(team.division);
      tdDiv.appendChild(divTag);

      const tdRegion = document.createElement('td');
      tdRegion.textContent = team.regionNumber || '';

      const tdTeam = document.createElement('td');
      tdTeam.textContent = team.teamName || '';

      const tdCoach = document.createElement('td');
      tdCoach.textContent = team.coachName || '';

      const tdCity = document.createElement('td');
      const city = team.city || '';
      const state = team.state || '';
      tdCity.textContent = city && state ? `${city}, ${state}` : city || state || '';

      tr.appendChild(tdDiv);
      tr.appendChild(tdRegion);
      tr.appendChild(tdTeam);
      tr.appendChild(tdCoach);
      tr.appendChild(tdCity);

      approvedBody.appendChild(tr);
    });
  }

  async function loadTeamsFromApi() {
    try {
      const res = await fetch(API_URL);
      const data = await res.json();
      teams = Array.isArray(data) ? data : [];
      renderApprovedTeams();
    } catch (err) {
      console.error(err);
      approvedEmptyNote.style.display = 'block';
      approvedEmptyNote.textContent = 'Unable to load teams. Please try again later.';
    }
  }

  loadTeamsFromApi();
</script>
</body>
</html>

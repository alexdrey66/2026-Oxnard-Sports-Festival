<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Approved Teams</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Your CSS goes here -->
</head>
<body>

<h2>Approved Teams</h2>

<div id="filters">
  <button class="pill-filter" data-div="ALL">All</button>
  <button class="pill-filter" data-div="10UB">10U Boys</button>
  <button class="pill-filter" data-div="10UG">10U Girls</button>
  <button class="pill-filter" data-div="12UB">12U Boys</button>
  <button class="pill-filter" data-div="12UG">12U Girls</button>
  <button class="pill-filter" data-div="14UB">14U Boys</button>
  <button class="pill-filter" data-div="14UG">14U Girls</button>
</div>

<table>
  <thead>
    <tr>
      <th>Division</th>
      <th>Region</th>
      <th>Team</th>
      <th>Coach</th>
      <th>City / State</th>
    </tr>
  </thead>
  <tbody id="approvedTeamsBody"></tbody>
</table>

<div id="approvedEmptyNote">Loading...</div>

<script>
  const API_URL = 'https://script.google.com/macros/s/AKfycby81ycJHK0S9NUWgWuYSuHHzmz9mf2VKV_oDt4KEJv-hvSvlvOF-dxZa-AnZacewuJ8/exec';

  let teams = [];
  let approvedFilterDivision = 'ALL';

  function divisionLabel(code) {
    return {
      '10UB': '10U Boys', '10UG': '10U Girls',
      '12UB': '12U Boys', '12UG': '12U Girls',
      '14UB': '14U Boys', '14UG': '14U Girls'
    }[code] || code;
  }

  document.getElementById("filters").addEventListener("click", (e) => {
    const btn = e.target.closest(".pill-filter");
    if (!btn) return;
    approvedFilterDivision = btn.dataset.div;
    loadApproved();
  });

  async function loadApproved() {
    const res = await fetch(API_URL);
    teams = await res.json();

    const tbody = document.getElementById('approvedTeamsBody');
    tbody.innerHTML = '';

    const filtered = teams.filter(t =>
      t.status === 'approved' &&
      (approvedFilterDivision === 'ALL' || t.division === approvedFilterDivision)
    );

    if (filtered.length === 0) {
      document.getElementById('approvedEmptyNote').style.display = 'block';
      return;
    }

    document.getElementById('approvedEmptyNote').style.display = 'none';

    filtered.forEach(team => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${divisionLabel(team.division)}</td>
        <td>${team.regionNumber}</td>
        <td>${team.teamName}</td>
        <td>${team.coachName}</td>
        <td>${team.city}, ${team.state}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  loadApproved();
</script>

</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Approved Teams – OSF 2026</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{
      --primary:#004b8d;
      --bg:#f3f4f6;
      --card:#ffffff;
      --border:#e5e7eb;
      --text:#111827;
      --muted:#6b7280;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top left,#dbeafe 0,#f9fafb 40%,#e5e7eb 100%);
      color:var(--text);
    }
    .nav{
      background:#000;
      color:#fff;
      padding:10px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    .nav-left{
      display:flex;
      align-items:center;
      gap:10px;
      font-size:14px;
      font-weight:600;
    }
    .nav-links{
      display:flex;
      gap:18px;
      font-size:13px;
    }
    .nav-links a{
      color:#e5e7eb;
      text-decoration:none;
      padding:4px 0;
    }
    .nav-links a:hover{color:#fff;}

    .page{
      max-width:960px;
      margin:0 auto;
      padding:28px 16px 40px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 10px;
      border-radius:999px;
      background:rgba(37,99,235,0.07);
      color:#1d4ed8;
      font-size:12px;
      font-weight:600;
      margin-bottom:6px;
    }
    h1{
      margin:0 0 4px;
      font-size:26px;
      letter-spacing:0.03em;
    }
    .subtitle{
      margin:0 0 18px;
      font-size:14px;
      color:var(--muted);
    }

    .division-card{
      background:var(--card);
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.5);
      box-shadow:0 16px 36px rgba(15,23,42,0.18);
      padding:14px 14px 12px;
      margin-bottom:18px;
    }
    .division-title{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:6px;
    }
    .division-title h2{
      margin:0;
      font-size:18px;
    }
    .count-badge{
      font-size:11px;
      background:#eff6ff;
      color:#1d4ed8;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid #bfdbfe;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px;
      margin-top:6px;
    }
    th,td{
      padding:6px 8px;
      border-bottom:1px solid #e5e7eb;
      text-align:left;
    }
    th{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:0.06em;
      color:#6b7280;
      background:#f9fafb;
    }
    tr:last-child td{border-bottom:none;}
    .muted{color:var(--muted); font-size:13px; margin-top:10px;}
  </style>
</head>
<body>
<header class="nav">
  <div class="nav-left">
    <span>2026 Oxnard Sports Festival</span>
  </div>
  <nav class="nav-links">
    <a href="index.html">Home</a>
    <a href="team-registration.html">Register Your Team</a>
    <a href="approved-teams.html">Approved Teams</a>
    <a href="#">Sign Up To Referee</a>
    <a href="admin.html">Admin</a>
  </nav>
</header>

<main class="page">
  <div class="badge">OSF 2026 • Accepted Teams</div>
  <h1>Approved Teams</h1>
  <p class="subtitle">
    Teams listed here have been fully accepted into the tournament. Pending teams will appear once all paperwork and fees are verified.
  </p>

  <div id="approvedRoot"></div>
  <div id="loading" class="muted">Loading approved teams…</div>
  <div id="error" class="muted" style="display:none;"></div>
</main>

<script>
  const API_URL = 'https://script.google.com/macros/s/AKfycbxTgz1zRnrtYvzsJraQeDKIdw5DY6-YFgs2FI87toZE7liLc1JXRgQbYcpIcmlhVczd/exec';

  const approvedRoot = document.getElementById('approvedRoot');
  const loadingEl = document.getElementById('loading');
  const errorEl = document.getElementById('error');

  const DIVISIONS = ['10UB','10UG','12UB','12UG','14UB','14UG'];
  const DIVISION_LABELS = {
    '10UB':'10U Boys',
    '10UG':'10U Girls',
    '12UB':'12U Boys',
    '12UG':'12U Girls',
    '14UB':'14U Boys',
    '14UG':'14U Girls'
  };

  async function loadApprovedTeams(){
    try{
      const res = await fetch(API_URL);
      const teams = await res.json();

      loadingEl.style.display = 'none';
      renderApproved(teams);
    }catch(err){
      console.error(err);
      loadingEl.style.display = 'none';
      errorEl.textContent = 'Unable to load teams right now. Please try again later.';
      errorEl.style.display = 'block';
    }
  }

  function renderApproved(teams){
    approvedRoot.innerHTML = '';
    const approved = teams.filter(t => String(t.status).toLowerCase() === 'approved');

    if (!approved.length){
      approvedRoot.innerHTML = '<p class="muted">No approved teams are listed yet. Please check back soon.</p>';
      return;
    }

    DIVISIONS.forEach(div => {
      const list = approved.filter(t => t.division === div);
      if (!list.length) return;

      const card = document.createElement('section');
      card.className = 'division-card';

      const header = document.createElement('div');
      header.className = 'division-title';

      const title = document.createElement('h2');
      title.textContent = DIVISION_LABELS[div] || div;

      const count = document.createElement('span');
      count.className = 'count-badge';
      count.textContent = `${list.length} team${list.length === 1 ? '' : 's'}`;

      header.appendChild(title);
      header.appendChild(count);
      card.appendChild(header);

      const table = document.createElement('table');
      table.innerHTML = `
        <thead>
          <tr>
            <th>Team</th>
            <th>Region</th>
            <th>City</th>
            <th>Coach</th>
          </tr>
        </thead>
      `;
      const tbody = document.createElement('tbody');

      list.sort((a,b) => String(a.teamName).localeCompare(String(b.teamName))).forEach(team => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${team.teamName || ''}</td>
          <td>${team.regionNumber || ''}</td>
          <td>${team.city || ''}, ${team.state || ''}</td>
          <td>${team.coachName || ''}</td>
        `;
        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      card.appendChild(table);
      approvedRoot.appendChild(card);
    });
  }

  loadApprovedTeams();
</script>
</body>
</html>
